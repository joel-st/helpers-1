/*
	General wrapper class for saving and retrieving data with browser's localStorage or sessionStorage using JavaScript.
	See README for usage.
	
	v1.0 - 5.8.2014 - mark@permanenttourist.ch - https://github.com/mhmli/helpers/tree/master/JavaScript/Web%20storage
*/Date.now||(Date.now=function(){return(new Date).getTime()});window.clientstorage=new function(){"use strict";this.available=function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return!1}};this.isAvailable=this.available();this.timestamp=function(e){return Math.floor(Date.now()/1e3)+e};this.localStore=function(e,t,n){if(this.isAvailable){n&&this.localSetExpiry(e+":x",n);return localStorage.setItem(e,JSON.stringify(t))}return!1};this.localFetch=function(e){var t;if(this.isAvailable){this.localCheckExpiry(e);t=localStorage.getItem(e);return t?JSON.parse(t):null}return!1};this.localRemove=function(e){if(this.isAvailable){localStorage.removeItem(e);localStorage.removeItem(e+":x")}};this.localCheckExpiry=function(e){var t;if(this.isAvailable){t=localStorage.getItem(e+":x");t!==null&&t<Math.floor(Date.now()/1e3)&&this.localRemove(e)}};this.localSetExpiry=function(e,t){this.isAvailable&&localStorage.setItem(e,t)};this.sessionStore=function(e,t,n){if(this.isAvailable){n&&this.sessionSetExpiry(e+":x",n);return sessionStorage.setItem(e,JSON.stringify(t))}return!1};this.sessionFetch=function(e){var t;if(this.isAvailable){this.sessionCheckExpiry(e);t=sessionStorage.getItem(e);return t?JSON.parse(t):null}return!1};this.sessionRemove=function(e){if(this.isAvailable){sessionStorage.removeItem(e);sessionStorage.removeItem(e+":x")}};this.sessionCheckExpiry=function(e){var t;if(this.isAvailable){t=sessionStorage.getItem(e+":x");t!==null&&t<this.timestamp()&&this.sessionRemove(e)}};this.sessionSetExpiry=function(e,t){this.isAvailable&&sessionStorage.setItem(e,this.timestamp(t))}};
/**
 * jQuery Grid-A-Licious(tm) v3.01
 *
 * Terms of Use - jQuery Grid-A-Licious(tm)
 * under the MIT (http://www.opensource.org/licenses/mit-license.php) License.
 *
 * Copyright 2008-2012 Andreas Pihlstr√∂m (Suprb). All rights reserved.
 * (http://suprb.com/apps/gridalicious/)
 *
 */// Debouncing function from John Hann
// http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
// Copy pasted from http://paulirish.com/2009/throttled-smartresize-jquery-event-handler/
(function(e,t){var n=function(e,t,n){var r;return function(){function i(){n||e.apply(s,o);r=null}var s=this,o=arguments;r?clearTimeout(r):n&&e.apply(s,o);r=setTimeout(i,t||150)}};jQuery.fn[t]=function(e){return e?this.bind("resize",n(e)):this.trigger(t)}})(jQuery,"smartresize");(function(e){e.Gal=function(t,n){this.element=e(n);this._init(t)};e.Gal.settings={selector:".item",width:225,gutter:20,animate:!1,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:!0,complete:function(){}}};e.Gal.prototype={_init:function(t){var n=this;this.name=this._setName(5);this.gridArr=[];this.gridArrAppend=[];this.gridArrPrepend=[];this.setArr=!1;this.setGrid=!1;this.setOptions;this.cols=0;this.itemCount=0;this.prependCount=0;this.isPrepending=!1;this.appendCount=0;this.resetCount=!0;this.ifCallback=!0;this.box=this.element;this.options=e.extend(!0,{},e.Gal.settings,t);this.gridArr=e.makeArray(this.box.find(this.options.selector));this.isResizing=!1;this.w=0;this.boxArr=[];this._setCols();this._renderGrid("append");e(this.box).addClass("gridalicious");e(window).smartresize(function(){n.resize()})},_setName:function(e,t){t=t?t:"";return e?this._setName(--e,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(Math.random()*60))+t):t},_setCols:function(){var t,n,r;this.cols=Math.floor(this.box.width()/this.options.width);diff=(this.box.width()-this.cols*this.options.width-this.options.gutter)/this.cols;w=(this.options.width+diff)/this.box.width()*100;this.w=w;for(t=0;t<this.cols;t++){n=e("<div></div>").addClass("galcolumn").attr("id","item"+t+this.name).css({width:w+"%",paddingLeft:this.options.gutter,paddingBottom:this.options.gutter,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(n)}this.box.find(e("#clear"+this.name)).remove();r=e("<div></div>").css({clear:"both",height:"0",width:"0",display:"block"}).attr("id","clear"+this.name);this.box.append(r)},_renderGrid:function(t,n,r){var i=[],s=[],o=[],u=0,f=this.prependCount,l=this.appendCount,c=this.options.gutter,h=this.cols,p=this.name,d=0,v=e(".galcolumn").width();if(n){s=n;if(t=="append"){l+=r;u=this.appendCount}if(t=="prepend"){this.isPrepending=!0;u=Math.round(r%h);u<=0&&(u=h)}if(t=="renderAfterPrepend"){l+=r;u=r}}else{s=this.gridArr;l=e(this.gridArr).size()}e.each(s,function(n,r){var s=e(r),o="100%";s.hasClass("not-responsive")&&(o="auto");s.css({marginBottom:c,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({width:o,height:"auto",display:"block","margin-left":"auto","margin-right":"auto"});if(t=="prepend"){u--;e("#item"+u+p).prepend(s);i.push(s);u==0&&(u=h)}else{e("#item"+u+p).append(s);i.push(s);u++;u>=h&&(u=0);l>=h&&(l-=h)}});this.appendCount=l;this.itemCount=u;if(t=="append"||t=="prepend"){t=="prepend"&&this._updateAfterPrepend(this.gridArr,s);this._renderItem(i);this.isPrepending=!1}else this._renderItem(this.gridArr)},_collectItems:function(){var t=[];e(this.box).find(this.options.selector).each(function(){t.push(e(this))});return t},_renderItem:function(t){var n=this.options.animationOptions.speed,r=this.options.animationOptions.effect,i=this.options.animationOptions.duration,s=this.options.animationOptions.queue,o=this.options.animate,u=this.options.animationOptions.complete,f=0,l=0;if(o===!0&&!this.isResizing){if(s===!0&&r=="fadeInOnAppear"){this.isPrepending&&t.reverse();e.each(t,function(r,s){setTimeout(function(){e(s).animate({opacity:"1.0"},i);l++;l==t.length&&u.call(undefined,t)},f*n);f++})}else if(s===!1&&r=="fadeInOnAppear"){this.isPrepending&&t.reverse();e.each(t,function(n,r){e(r).animate({opacity:"1.0"},i);l++;l==t.length&&this.ifCallback&&u.call(undefined,t)})}s===!0&&!r&&e.each(t,function(n,r){e(r).css({opacity:"1",filter:"alpha(opacity=1)"});l++;l==t.length&&this.ifCallback&&u.call(undefined,t)})}else{e.each(t,function(t,n){e(n).css({opacity:"1",filter:"alpha(opacity=1)"})});this.ifCallback&&u.call(t)}},_updateAfterPrepend:function(t,n){var r=this.gridArr;e.each(n,function(e,t){r.unshift(t)});this.gridArr=r},resize:function(){this.box.find(e(".galcolumn")).remove();this._setCols();this.ifCallback=!1;this.isResizing=!0;this._renderGrid("append");this.ifCallback=!0;this.isResizing=!1},append:function(t){var n=this.gridArr,r=this.gridArrPrepend;e.each(t,function(e,t){n.push(t);r.push(t)});this._renderGrid("append",t,e(t).size())},prepend:function(t){this.ifCallback=!1;this._renderGrid("prepend",t,e(t).size());this.ifCallback=!0}};e.fn.gridalicious=function(t,n){typeof t=="string"?this.each(function(){var r=e.data(this,"gridalicious");r[t].apply(r,[n])}):this.each(function(){e.data(this,"gridalicious",new e.Gal(t,this))});return this}})(jQuery);
/*! 
 * objectfactory - v1.0.0 (https://github.com/greenish/js-objectfactory)
 * 
 * Copyright (c) 2013 Philipp Adrian (www.philippadrian.com)
 *
 * The MIT Licence (http://opensource.org/licenses/MIT)
 */////////////////////////////////////////////////////////////////////////////////
(function(e){"use strict";var t,n=/xyz/.test(function(){xyz})?/\bthis\._super\b/:/.*/,r=/xyz/.test(function(){xyz})?/\bFunction\b/:/.*/,i=function(){},s={deep:!1,"abstract":!1,"super":!1},o=Array.toString(),u=Array.isArray||function(e){return},a=function(e,t){var n={unexpected:"Unexpected '"+t+"'! Only 'functions' and 'objects' can be used with the objectfactory.",unexpectedArray:"Unexpected 'array'! Arrays are only allowed as first parameter to set options and must only contain strings. ['deep', 'super', 'abstract']","abstract":"Abstract method '"+t+"' needs to be defined."};throw"objectfactory: "+n[e]},f=function(e,t){return typeof e!="function"||!n.test(e)?e:function(){var n=this._super;this._super=t;var r=e.apply(this,arguments);this._super=n;return r}},l=function(e,t){var n,r,i;for(var s=0;s<t.length;s++)try{n=e;r=t[s].split(".");for(var o=0;o<r.length-1;o++)n=n[r[o]];i=n[r[r.length-1]];if(typeof i!="function"||i===Function)throw""}catch(u){a("abstract",t[s]+"()")}},c=function(e,t,n,r,i,o){n=n||s;if(typeof i=="object")for(var u in i)h(e,t,i[u],n,r,o);else for(var u in t)h(e,t,u,n,r,o);return e},h=function(t,n,r,i,s,o){var a;o=o||"";if(i.deep&&typeof n[r]=="object"){a=u(n[r])?[]:{};t[r]=c(a,n[r],i,s,e,o+r+".")}else if(i.abstract&&n[r]===Function){s.push(o+r);typeof t[r]!="function"&&(t[r]=n[r])}else i.super&&n[r]!==t[r]?t[r]=f(n[r],t[r]):t[r]=n[r]},p=function(e,t){var n;if(typeof e=="function")if(m.debug&&typeof Function.prototype.bind=="function"){Array.prototype.unshift.call(t,null);n=new(Function.prototype.bind.apply(e,t))}else{i.prototype=e.prototype;i.prototype.constructor=e;n=new i;e.apply(n,t)}else{i.prototype=e;n=new i}return n},d=function(t,i,s,o){var u=i.obj.prototype,a=i.super&&n.test(i.obj),f=i.abstract&&r.test(i.obj),l,h;t=c(t,u,i,o);if(!m.debug&&!a&&!f&&!i.deep){i.obj.apply(t,s);return t}i.obj.prototype=t;i.obj.prototype.constructor=i.obj;l=p(i.obj,s);i.obj.prototype=u;i.obj.prototype.constructor=i.obj;if(a||f||i.deep){m.debug&&(t=p(t));h=typeof Object.getOwnPropertyNames=="function"?Object.getOwnPropertyNames(l):e;l=c(t,l,i,o,h)}return l},v=function(e,n,r,i){var s,o;for(var u=0;u<n.length;u++){o=n[u];s=typeof o.obj=="function";if(s&&o.strObj===t)e=o.obj.call(m,e,r,i,o);else{m.debug&&(e=p(e));e=s?d(e,o,r,i):c(e,o.obj,o,i)}}return e},m=function(){var e=p(s),n=[],r=typeof arguments[0],o=1,f=function(t,r,i,s){if(this===m){s.instanceof=h;return v(t,n,r,i)}var i=[],o={"instanceof":h},u=v(o,n,arguments,i),a,f,c,p;l(u,i);u.construct&&(a=u.construct.apply(u,arguments));f=typeof a;return f==="object"||f==="function"?a:u},h=function(e){if(typeof e=="function"&&this instanceof e)return!0;if(f===e)return!0;for(var r=0;r<n.length;r++){if(n[r].strObj===t&&n[r].instanceof(e))return!0;if(n[r].obj===e)return!0}return!1};if(u(arguments[0]))for(var d=0;d<arguments[0].length;d++)typeof arguments[0][d]=="string"?typeof e[arguments[0][d]]=="boolean"&&(e[arguments[0][d]]=!0):a("unexpectedArray");else r==="string"&&typeof e[arguments[0]]=="boolean"?e[arguments[0]]=!0:r==="boolean"?e.deep=arguments[0]:o=0;for(;o<arguments.length;o++){r=typeof arguments[o];if(r==="object"||r==="function")if(!u(arguments[o])){n.push(c(p(e),{obj:arguments[o],strObj:r==="function"?""+arguments[o]:"","instanceof":i}));r==="function"&&c(f,arguments[o],{deep:e.deep,"super":e.super,"abstract":!1})}else a("unexpectedArray");else a("unexpected",r)}return f};m.debug=!1;t=""+m();typeof module=="object"?module.exports=m:window.objectfactory=m})();
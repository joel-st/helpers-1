"use strict";var Frp_inline_uploader=function(){var e={"default":{fail_opentempdir:"Failed to open temp directory",fail_openoutput:"Failed to open output stream",fail_movefile:"Failed to move uploaded file",fail_getfile:"Failed to open input stream",upload_unsuccessful:"File upload unsuccessful"},de:{fail_opentempdir:"Konnte das tempor채re Verzeichnis nicht lesen",fail_openoutput:"Konnte die Ausgabekanal nicht aufmachen",fail_movefile:"Konnte die tempor채re Datei nicht in den Zielverzeichnis verschieben",fail_getfile:"Konnte nicht auf die Datei zugreifen",upload_unsuccessful:"Die Datei konnte nicht aufgeladen werden"},fr:{fail_opentempdir:"Konnte das tempor채re Verzeichnis nicht lesen",fail_openoutput:"Konnte die Ausgabekanal nicht aufmachen",fail_movefile:"Konnte die tempor채re Datei nicht in den Zielverzeichnis verschieben",fail_getfile:"Konnte nicht auf die Datei zugreifen",upload_unsuccessful:"Die Datei konnte nicht aufgeladen werden"}},t=e["default"],n="default",r=null,i=Array(),s="",o=null,u=null,a=null,f=Array();this.make=function(e){l();c(e);h(f.folder);r=new plupload.Uploader({multi_selection:!1,runtimes:"html5,flash,silverlight",browse_button:f.link_select.attr("id"),container:f.container,url:f.uploader+"?folder="+f.folder,flash_swf_url:"../js/Moxie.swf",silverlight_xap_url:"../js/Moxie.xap",filters:{max_file_size:"32mb",mime_types:[{title:"Image files",extensions:"jpg,gif,png"}]},init:{PostInit:function(){f.filelist.html("");f.link_upload.click(function(e){e.preventDefault();r.start()})},UploadProgress:function(e,t){$("b",f.filelist).html("<span>"+t.percent+"%</span>")},Error:function(e,t){f.console.append("\nError #"+t.code+": "+t.message)}}});r.init();r.bind("FilesAdded",g);r.bind("FileUploaded",m)};var l=function(){n=$("html").attr("lang");e[n]&&(t=e[n])},c=function(e){f=e;f.container=f.container[0]},h=function(e){o=e},p=function(e){i=$.parseJSON(e.response);d()},d=function(){i&&i.status==200&&i.result&&(s=i.result)},v=function(){return i&&i.status&&i.status==200},m=function(e,t,n){p(n);v()?y():alert(this.messages.upload_unsuccessful)},g=function(e,t){r.files.length==2&&r.removeFile(uploader.files[0]);$.each(t,function(e,t){f.filelist.html('<div id="'+t.id+'">'+t.name+" ("+plupload.formatSize(t.size)+") <b></b>"+"</div>")});e.refresh()},y=function(){w();b()},b=function(){f.filelist.empty().append(u);f.formfield.val(s);f.controls.hide()},w=function(){u=$('<img src="'+o+s+'"/>')}},frp_inline_uploader=new Frp_inline_uploader;frp_inline_uploader.make({fieldname:"bild",uploader:"upload.php",folder:"uploads/tx_frpveranstaltungen/",container:$("#plupload_container"),filelist:$("#plupload_filelist"),link_select:$("#plupload_pickfiles"),link_upload:$("#plupload_uploadfiles"),controls:$("#plupload_controls"),console:$("#plupload_console"),formfield:$('input[name="bild"]')});
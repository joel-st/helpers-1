var Bgsrcset;!function(){"use strict";function t(t){var e=1;return"-"===t[0]&&(e=-1,t=t.substr(1)),function(s,r){var n=s[t]<r[t]?-1:s[t]>r[t]?1:0;return n*e}}Bgsrcset=function(){this.called=!1,this.callonce=!0,this.compat()},Bgsrcset.prototype.init=function(t,e){this.retina=window.devicePixelRatio>1,this.elements=[],this.callback="function"==typeof e?e:function(){},this.curwidth=this.getWidth();for(var s=this.gather(t),r=0,n=s.length;n>r;r++)this.parse(s[r]);this.set(),this.resize()},Bgsrcset.prototype.compat=function(){var t=document;"function"!=typeof t.getElementsByClassName&&(t.getElementsByClassName=function(e){return t.querySelectorAll("."+e)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),t.addEventListener||(this.addEvent=function(t,e,s){t.attachEvent("on"+e,function(t){s(t||window.event)})})},Bgsrcset.prototype.gather=function(t){var e=["HTMLCollection","NodeList"],s=t,r=s.nodeType?"Object":Object.prototype.toString.call(s).replace(/^\[object |\]$/g,""),n="parse"+r;return e.indexOf(r)>-1?s:this[n]?this[n](s):[]},Bgsrcset.prototype.parseObject=function(t){return t.nodeType?[t]:[]},Bgsrcset.prototype.parseArray=function(t){return t},Bgsrcset.prototype.parseString=function(t){var e=document,s=t.trim(),r=s[0],n=[];switch(!0){case"."===r:n=e.getElementsByClassName(s.substring(1));break;case"#"===r:n.push(e.getElementById(s.substring(1)));break;case/^[a-zA-Z]+$/.test(s):n=e.getElementsByTagName(s);break;default:n=[]}return n},Bgsrcset.prototype.parse=function(t){var e=t.getAttribute("bg-srcset");if(null===r)return!1;this.elements.push({});var s=e.split(","),r="",n=this.elements[this.elements.length-1];n.node=t,n.srcset=[];for(var i=0,c=s.length;c>i;i++){n.srcset.push({}),r=s[i].trim();for(var o=r.split(" "),a,l,h,u=0,g=o.length;g>u;u++){switch(a=o[u],l=n.srcset[i],h=a.length-1,!0){case""===a.trim():continue;case"w"!==a[h]&&"x"!==a[a.length-1]:l.src=a;break;case"w"===a[h]:l.width=parseInt(a.slice(0,-1));break;case"x"===a[h]:l.retina=parseInt(a.slice(0,-1))>1}l.width||(l.width=Number.POSITIVE_INFINITY),l.retina||(l.retina=!1)}}},Bgsrcset.prototype.set=function(){for(var t=0,e=this.elements.length;e>t;t++)this.setSingle(t)},Bgsrcset.prototype.setSingle=function(e){var s=0,r=this.elements[e],n=[],i=0,c=this;s=this.getWidth(),r.srcset=r.srcset.sort(t("width"));for(var o=0,a=r.srcset.length;a>o;o++)r.srcset[o].width<s||n.push(r.srcset[o]);if(0===n.length&&n.push(r.srcset[r.srcset.length-1]),i=n[0],n.length>1&&n[0].width===n[1].width&&(i=n[0].retina!==this.retina?n[1]:n[0]),void 0!==i.src&&"null"!==i.src){var l=new Image,h=!1;l.onload=l.onreadystatechange=function(){h||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(h=!0,r.node.style.backgroundImage="url('"+i.src+"')",c.called||(c.callback(r),c.called=c.callonce))},l.src=i.src}else r.node.style.backgroundImage=""},Bgsrcset.prototype.resize=function(){var t=this,e=setTimeout(function(){},0);this.addEvent(window,"resize",function(){clearTimeout(e),e=setTimeout(function(){var e=t.getWidth();e!==t.curwidth&&(t.curwidth=e,t.set())},250)})},Bgsrcset.prototype.addEvent=function(t,e,s){t.addEventListener(e,s,!1)},Bgsrcset.prototype.getWidth=function(){var t,e,s,r;return t=window,e=document,s=e.documentElement,r=e.getElementsByTagName("body")[0],t.innerWidth||s.clientWidth||r.clientWidth},window.Bgsrcset=Bgsrcset}();var bgss=new Bgsrcset;bgss.callonce=!1,bgss.init(".bg-srcset",function(t){t.node.className+=" loaded"});